<!DOCTYPE html>
<html lang="es" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IAP - Sistema de Gestión de Biomasa y Carbono</title>
  <script>
    // Aplicar tema antes de que se renderice la página (evita flash)
    (function() {
      const theme = localStorage.getItem('theme') || 'dark';
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    })();
  </script>
  <!-- Google Maps script will be injected by Vite -->
  <script>
    // La API key se carga desde variables de entorno
    window.GOOGLE_MAPS_API_KEY = '%VITE_GOOGLE_MAPS_API_KEY%';
  </script>
  <script>
    (function() {
      const apiKey = import.meta.env?.VITE_GOOGLE_MAPS_API_KEY || window.GOOGLE_MAPS_API_KEY?.replace('%VITE_GOOGLE_MAPS_API_KEY%', '') || '';
      if (apiKey && apiKey !== '%VITE_GOOGLE_MAPS_API_KEY%') {
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=geometry&v=weekly`;
        script.defer = true;
        document.head.appendChild(script);
      }
    })();
  </script>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>
</html>
